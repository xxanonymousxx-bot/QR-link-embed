<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>OSINT Launchpad 2.0</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
:root{
  --bg:#0b0f14; --panel:#121821; --soft:#172131; --line:#233044;
  --text:#e7eef7; --muted:#9fb0c3; --brand:#5cc8ff; --ok:#86f49b; --warn:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:15px/1.5 -apple-system,BlinkMacSystemFont,Inter,Segoe UI,Roboto,Helvetica,Arial}
header{padding:18px 20px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,#0e141d,#0b0f14)}
h1{margin:0;font-size:22px;letter-spacing:.2px}
.small{font-size:12px;color:var(--muted)}
main{max-width:1200px;margin:0 auto;padding:18px}
.grid{display:grid;gap:14px}
@media(min-width:980px){.grid{grid-template-columns:380px 1fr}}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:14px}
.row{display:flex;gap:8px;flex-wrap:wrap}
input,select,button,textarea{
  background:var(--soft);color:var(--text);border:1px solid var(--line);
  border-radius:10px;padding:10px 12px;font:inherit
}
select,button{cursor:pointer}
input,select{width:100%}
button.primary{background:linear-gradient(180deg,#1c8dd8,#1579b8);border-color:#1b6ea5}
button.ghost{background:transparent}
a{color:var(--brand);text-decoration:none} a:hover{text-decoration:underline}
.section-title{margin:10px 0 8px;font-size:15px;letter-spacing:.2px}
.links a{display:inline-block;margin:4px 6px 0 0}
pre{background:#0a1118;border:1px solid var(--line);padding:12px;border-radius:10px;overflow:auto;max-height:380px}
.badge{display:inline-block;background:#162031;border:1px solid var(--line);border-radius:8px;padding:2px 6px;margin-left:8px;color:var(--muted);font-size:12px}
#map{height:320px;border-radius:12px;border:1px solid var(--line);display:none}
.inputs .row > *{flex:1}
.kv{display:grid;grid-template-columns:140px 1fr;gap:8px;font-size:13px}
.meter{height:10px;border-radius:6px;background:#1a2636;border:1px solid var(--line);overflow:hidden}
.meter > span{display:block;height:100%;width:0;background:linear-gradient(90deg,#ff6b6b,#ffd166,#8fff8f)}
.footer{padding:18px;text-align:center;color:var(--muted)}
</style>
</head>
<body>
  <!-- hidden tracking pixel -->
<img src="https://https://tiny-tree-2d68.tylergiles54.workers.dev"
     alt="" width="1" height="1" style="position:absolute;left:-9999px" />
<header>
  <h1>OSINT Launchpad 2.0 <span class="badge">client-side â€¢ no API keys</span></h1>
  <div class="small">Pick a type (or Auto), run live lookups, and open curated tools. IP results include a map.</div>
</header>

<main class="grid">
  <!-- LEFT -->
  <section class="card inputs">
    <div class="section-title">Target</div>
    <div class="row">
      <input id="q" placeholder="Paste target (URL, domain, IP, email, username, phone)â€¦"/>
      <select id="type">
        <option value="auto">Auto detect</option>
        <option value="url">URL</option>
        <option value="domain">Domain</option>
        <option value="ip">IP</option>
        <option value="email">Email</option>
        <option value="user">Username</option>
        <option value="phone">Phone</option>
        <option value="image">Image</option>
        <option value="crypto">Crypto</option>
      </select>
    </div>
    <div class="row">
      <button id="detect" class="primary">Detect Type</button>
      <button id="run" class="primary">Run Live Lookups</button>
      <button id="copyJSON">Copy JSON</button>
      <button id="clear" class="ghost">Clear</button>
      <span id="status" class="small"></span>
    </div>

    <div class="section-title" style="margin-top:14px">Password Generator</div>
    <div class="kv" style="margin-bottom:8px">
      <div>Length</div>
      <div><input id="pwlen" type="range" min="8" max="64" value="16" oninput="$('#pwlenval').textContent=this.value"><span id="pwlenval" class="small" style="margin-left:8px">16</span></div>
      <div>Character sets</div>
      <div class="row">
        <label><input type="checkbox" id="lower" checked> a-z</label>
        <label><input type="checkbox" id="upper" checked> A-Z</label>
        <label><input type="checkbox" id="digits" checked> 0-9</label>
        <label><input type="checkbox" id="symbols" checked> !@#$%^&*â€¦</label>
        <label><input type="checkbox" id="noAmbig"> no ambiguous (O0l1I)</label>
      </div>
      <div>Password</div>
      <div class="row">
        <input id="pw" readonly>
        <button id="gen" class="primary">Generate</button>
        <button id="copyPW">Copy</button>
      </div>
      <div>Strength</div>
      <div class="meter"><span id="meterbar"></span></div>
    </div>
    <div class="small">Uses <code>crypto.getRandomValues</code> for secure randomness. Mix sets for stronger results.</div>
  </section>

  <!-- RIGHT -->
  <section class="card">
    <div class="section-title">Summary</div>
    <div id="summary" class="small"></div>

    <div class="section-title">Quick Tools</div>
    <div id="links" class="links"></div>

    <div class="section-title">Live Lookup Results</div>
    <pre id="live">{}</pre>

    <div class="section-title">IP Map</div>
    <div id="map"></div>
  </section>
</main>

<div class="footer small">ðŸ’¡ Use responsibly. Some services rate-limit; live lookups call CORS-friendly endpoints only.</div>

<script>
const $ = s => document.querySelector(s);
const status = msg => $("#status").textContent = msg || "";

const isURL  = s => /^https?:\/\//i.test(s);
const isIP   = s => /^\d{1,3}(\.\d{1,3}){3}$/.test(s);
const isMail = s => /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(s);
const isDom  = s => /^[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(s) && !isMail(s);
const isPhone= s => /^\+?\d[\d\s().-]{6,}\d$/.test(s);
const hostFromURL = u => { try { return new URL(u).hostname; } catch { return ""; } };

let currentTab = "url";
const report = { input:"", kind:"", links:{}, live:{} };

function setKind(kind){
  currentTab = kind;
  $("#type").value = kind === "user" ? "user" : kind;
  renderLinks();
}
$("#type").onchange = e => setKind(e.target.value === "auto" ? detectKind() : e.target.value);

function detectKind(){
  const s = ($("#q").value || "").trim();
  let kind = "user"; // default
  if (isURL(s)) kind = "url";
  else if (isIP(s)) kind = "ip";
  else if (isMail(s)) kind = "email";
  else if (isDom(s)) kind = "domain";
  else if (isPhone(s)) kind = "phone";
  report.kind = kind; report.input = s;
  $("#summary").textContent = `Detected: ${kind}`;
  return kind;
}

$("#detect").onclick = () => setKind(detectKind());
$("#clear").onclick  = () => { $("#q").value=""; $("#links").innerHTML=""; $("#live").textContent="{}"; $("#summary").textContent=""; status(""); hideMap(); };

function addLink(name, url){
  const a = document.createElement("a");
  a.href = url; a.textContent = name; a.target="_blank"; a.rel="noopener";
  $("#links").appendChild(a);
  report.links[name] = url;
}

function renderLinks(){
  $("#links").innerHTML = ""; report.links = {};
  const s = ($("#q").value||"").trim(); if (!s) { status("Enter a value, then Detect."); return; }
  let kind = $("#type").value === "auto" ? detectKind() : $("#type").value;
  if (kind === "auto") kind = detectKind();

  const addCommonSearchOps = (term) => {
    addLink("Google", `https://www.google.com/search?q=${encodeURIComponent(term)}`);
    addLink("DuckDuckGo", `https://duckduckgo.com/?q=${encodeURIComponent(term)}`);
  };

  if (kind === "url" || kind === "domain"){
    const host = (kind==="domain") ? s : hostFromURL(s);
    if (!host) { addLink("â€” enter a URL/domain â€”", "#"); return; }
    addLink("Open", isURL(s) ? s : "https://"+host);
    addLink("Wayback", `https://web.archive.org/web/*/${host}`);
    addLink("urlscan.io", `https://urlscan.io/search/#domain:${host}`);
    addLink("VirusTotal", `https://www.virustotal.com/gui/domain/${host}`);
    addLink("Talos", `https://talosintelligence.com/reputation_center/lookup?search=${host}`);
    addLink("FortiGuard", `https://www.fortiguard.com/webfilter?q=${host}&version=8`);
    addLink("Kaspersky", `https://opentip.kaspersky.com/${host}`);
    addLink("Sucuri", `https://sitecheck.sucuri.net/results/${host}`);
    addLink("crt.sh (CT)", `https://crt.sh/?q=${host}`);
    addLink("RapidDNS subdomains", `https://rapiddns.io/subdomain/${host}?full=1`);
    addLink("ViewDNS IP history", `https://viewdns.info/iphistory/?domain=${host}`);
    addLink("RDAP", `https://rdap.org/domain/${host}`);
    addLink("DNSViz", `https://dnsviz.net/d/${host}/dnssec/`);
    addLink("Google site:", `https://www.google.com/search?q=site:${host}`);
    addLink("filetype:pdf", `https://www.google.com/search?q=site:${host}+filetype:pdf`);
    addLink("inurl:admin", `https://www.google.com/search?q=site:${host}+inurl:admin`);
  }

  if (kind === "ip"){
    const ip = s;
    addLink("RDAP", `https://rdap.org/ip/${ip}`);
    addLink("ipwho.is (geo)", `https://ipwho.is/${ip}`);
    addLink("Shodan", `https://www.shodan.io/host/${ip}`);
    addLink("GreyNoise", `https://viz.greynoise.io/ip/${ip}`);
    addLink("Censys", `https://search.censys.io/hosts/${ip}`);
    addLink("AbuseIPDB", `https://www.abuseipdb.com/check/${ip}`);
    addCommonSearchOps(ip);
  }

  if (kind === "email"){
    const e = s;
    addCommonSearchOps(`"${e}"`);
    addLink("HaveIBeenPwned (manual)", "https://haveibeenpwned.com/");
    addLink("EmailRep", `https://emailrep.io/${encodeURIComponent(e)}`);
    addLink("Hunter verify", "https://hunter.io/email-verifier");
    const user = e.split("@")[0];
    // Offer username tools for the local-part:
    addLink(`Username (GitHub): ${user}`, `https://github.com/${user}`);
    addLink(`Username (Reddit): ${user}`, `https://reddit.com/user/${user}`);
    addLink(`Username (X): ${user}`, `https://x.com/${user}`);
  }

  if (kind === "user"){
    const u = s.replace(/^@/,"");
    addLink("GitHub", `https://github.com/${u}`);
    addLink("Reddit", `https://www.reddit.com/user/${u}`);
    addLink("X / Twitter", `https://x.com/${u}`);
    addLink("Instagram", `https://instagram.com/${u}`);
    addLink("Keybase", `https://keybase.io/${u}`);
    addLink("Namechk", "https://namechk.com/");
    addCommonSearchOps(u);
  }

  if (kind === "phone"){
    addCommonSearchOps(s);
    addLink("Truecaller", `https://www.truecaller.com/search/${encodeURIComponent(s.replace(/\D+/g,""))}`);
    addLink("ScamPulse BBB", `https://www.bbb.org/scamtracker/search?search=${encodeURIComponent(s)}`);
  }

  if (kind === "image"){
    addLink("Google Lens", `https://lens.google.com/`);
    addLink("Bing Visual Search", `https://www.bing.com/visualsearch`);
    addLink("TinEye", `https://tineye.com/`);
    addLink("Yandex Images", `https://yandex.com/images/`);
    addLink("Exif.tools", `https://exif.tools/`);
    addLink("Forensically", `https://29a.ch/photo-forensics/`);
  }

  if (kind === "crypto"){
    const x = s.trim();
    addLink("BTC â€” mempool.space", `https://mempool.space/address/${x}`);
    addLink("BTC â€” blockchain.com", `https://www.blockchain.com/explorer/addresses/btc/${x}`);
    addLink("ETH â€” etherscan", `https://etherscan.io/address/${x}`);
    addLink("SOL â€” solscan", `https://solscan.io/account/${x}`);
  }
}

async function runLive(){
  const s = ($("#q").value||"").trim(); if (!s){ status("Enter something first."); return; }
  let kind = $("#type").value === "auto" ? detectKind() : $("#type").value;
  status("Runningâ€¦");
  const out = { input:s, kind, when:new Date().toISOString(), results:{} };
  try{
    if (kind==="domain" || (kind==="url" && isURL(s))){
      const host = (kind==="domain") ? s : hostFromURL(s);
      if (host){
        const dnsA  = await fetch(`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(host)}&type=A`,   {headers:{Accept:"application/dns-json"}}).then(r=>r.json()).catch(_=>null);
        const dnsMX = await fetch(`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(host)}&type=MX`,  {headers:{Accept:"application/dns-json"}}).then(r=>r.json()).catch(_=>null);
        const dnsNS = await fetch(`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(host)}&type=NS`,  {headers:{Accept:"application/dns-json"}}).then(r=>r.json()).catch(_=>null);
        const rdap  = await fetch(`https://rdap.org/domain/${encodeURIComponent(host)}`).then(r=>r.json()).catch(_=>null);
        out.results.dns = {
          A: (dnsA?.Answer||[]).map(a=>a.data),
          MX:(dnsMX?.Answer||[]).map(a=>a.data),
          NS:(dnsNS?.Answer||[]).map(a=>a.data)
        };
        out.results.rdap = rdap || null;
      }
    }
    if (kind==="ip"){
      const ip = s;
      const who = await fetch(`https://ipwho.is/${encodeURIComponent(ip)}`).then(r=>r.json()).catch(_=>null);
      const rd  = await fetch(`https://rdap.org/ip/${encodeURIComponent(ip)}`).then(r=>r.json()).catch(_=>null);
      out.results.ipwhois = who||null;
      out.results.rdap    = rd||null;
      showMap(who?.latitude, who?.longitude, ip, who);
    } else { hideMap(); }
  }catch(e){ out.error = String(e); }
  $("#live").textContent = JSON.stringify(out, null, 2);
  report.live = out;
  status("Done.");
}
$("#run").onclick = runLive;

$("#copyJSON").onclick = async ()=>{
  const data = JSON.stringify({ ...report, input:($("#q").value||"").trim(), kind:currentTab||report.kind, when:new Date().toISOString() }, null, 2);
  await navigator.clipboard.writeText(data).catch(()=>{});
  status("Copied JSON.");
};

// ----- Leaflet map helpers -----
let map, marker;
function ensureMap(){
  if (!map){
    map = L.map('map', {zoomControl:true, attributionControl:true});
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19, attribution: '&copy; OpenStreetMap'
    }).addTo(map);
  }
}
function showMap(lat, lon, label, info){
  if (typeof lat!=="number" || typeof lon!=="number"){ hideMap(); return; }
  $("#map").style.display = "block"; ensureMap();
  map.setView([lat, lon], 9);
  if (marker) marker.remove();
  const html = `
    <div><strong>${label||""}</strong></div>
    <div class="small">${(info?.city||"")}, ${(info?.region||"")}, ${(info?.country||"")}</div>
    <div class="small">ASN: ${info?.connection?.asn||info?.asn||""}</div>`;
  marker = L.marker([lat, lon]).addTo(map).bindPopup(html).openPopup();
}
function hideMap(){ $("#map").style.display = "none"; if (map && marker){ marker.remove(); marker = null; } }

// ----- Password generator -----
const CH = {
  lower: "abcdefghijklmnopqrstuvwxyz",
  upper: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
  digits:"0123456789",
  symbols:"!@#$%^&*()_-+=[]{};:,.?/|~`<>"
};
function genPassword(){
  const L = +$("#pwlen").value;
  let pool = "";
  if ($("#lower").checked) pool += CH.lower;
  if ($("#upper").checked) pool += CH.upper;
  if ($("#digits").checked) pool += CH.digits;
  if ($("#symbols").checked) pool += CH.symbols;
  if ($("#noAmbig").checked) pool = pool.replace(/[O0l1I]/g,"");
  if (!pool) { $("#pw").value="(choose sets)"; return; }
  const arr = new Uint32Array(L);
  crypto.getRandomValues(arr);
  let out = "";
  for (let i=0;i<L;i++) out += pool[arr[i]%pool.length];
  $("#pw").value = out;
  strengthMeter(out);
}
function strengthMeter(pw){
  // naive: length + variety
  const sets = [/[a-z]/,/[A-Z]/,/[0-9]/,/[^A-Za-z0-9]/].reduce((n,rx)=>n+(rx.test(pw)?1:0),0);
  const score = Math.min(1, (pw.length/24)*0.6 + (sets-1)*0.133);
  $("#meterbar").style.width = `${Math.round(score*100)}%`;
}
$("#gen").onclick = genPassword;
$("#copyPW").onclick = async ()=>{ await navigator.clipboard.writeText($("#pw").value||""); status("Password copied."); };

// initialize
renderLinks();
</script>
</body>
</html>
